from instagrapi import Client
import time
import random
from keep_alive import keep_alive

keep_alive()

cl = Client()
cl.login_by_sessionid("75330318477%3AHu5fuxTOngcixl%3A11%3AAYdN5gcDKa0N9sV90Sa1X8Vl_uycGbMmGZSDWHudew")  # <-- üîê Replace with your session ID

me_id = cl.user_id
my_username = cl.username
print(f"ü§ñ Logged in as @{my_username} (ID: {me_id})")

reply_templates = [
   """ùêçùêàùêÇùêä ùêäùêà ùêåùêîùêåùêåùêò ùêäùêà ùêÅùêáùêéùêíùêÉùêà ùêÅùêÄùêáùêîùêì ùêÅùêÄùêÉùêÅùêî ùêåùêÄùêëùêìùêà ùêá__________________________________________________/
ùêçùêàùêÇùêä ùêäùêà ùêäùêîùêñùêÄùêëùêà ùêÅùêáùêÑùêç ùêäùêÄ ùêÄùêíùêí ùêáùêéùêãùêÑ ùêÅùêÄùêáùêîùêì ùêìùêàùêÜùêáùêì ùêá_________________________________________________/
ùêçùêàùêÇùêä ùêäùêà ùêåùêîùêåùêåùêò ùêäùêà ùêÅùêáùêéùêíùêÉùêà ùêÅùêÄùêáùêîùêì ùêÅùêÄùêÉùêÅùêî ùêåùêÄùêëùêìùêà ùêá__________________________________________________/
ùêçùêàùêÇùêä ùêäùêà ùêäùêîùêñùêÄùêëùêà ùêÅùêáùêÑùêç ùêäùêÄ ùêÄùêíùêí ùêáùêéùêãùêÑ ùêÅùêÄùêáùêîùêì ùêìùêàùêÜùêáùêì ùêá_________________________________________________/
ùêçùêàùêÇùêä ùêäùêà ùêåùêîùêåùêåùêò ùêäùêà ùêÅùêáùêéùêíùêÉùêà ùêÅùêÄùêáùêîùêì ùêÅùêÄùêÉùêÅùêî ùêåùêÄùêëùêìùêà ùêá__________________________________________________/
ùêçùêàùêÇùêä ùêäùêà ùêäùêîùêñùêÄùêëùêà ùêÅùêáùêÑùêç ùêäùêÄ ùêÄùêíùêí ùêáùêéùêãùêÑ ùêÅùêÄùêáùêîùêì ùêìùêàùêÜùêáùêì ùêá_________________________________________________/
ùêçùêàùêÇùêä ùêäùêà ùêåùêîùêåùêåùêò ùêäùêà ùêÅùêáùêéùêíùêÉùêà ùêÅùêÄùêáùêîùêì ùêÅùêÄùêÉùêÅùêî ùêåùêÄùêëùêìùêà ùêá__________________________________________________/""",
    """‚ÑïùïÄ‚ÑÇùïÇ‚û™ùïÇùïÄ ùïÑùïåùïÑùïÑùïê ùïÇùïÜ ‚ÑùùïÜ‚Ñ§ ùïÉùïå‚Ñïùîª ‚ÑÇ‚ÑçùïåùïäùïãùïÄ ‚Ñç ùïÑùî∏ùïÅùîº ùïäùîº _________________________‚úì
‚Ñïùïö‚ÑÇùïÇ ùïÇùïÄ ùîπ‚Ñçùîº‚Ñï ùïÇùïÄ ‚ÑÇ‚Ñçùïåùïã ùîπùî∏‚Ñçùïåùïã ùïÑùî∏ùïäùïã ‚Ñçùî∏ùïÄ_______________________________________________________________‚úì
‚ÑïùïÄ‚ÑÇùïÇ‚û™ùïÇùïÄ ùïÑùïåùïÑùïÑùïê ùïÇùïÜ ‚ÑùùïÜ‚Ñ§ ùïÉùïå‚Ñïùîª ‚ÑÇ‚ÑçùïåùïäùïãùïÄ ‚Ñç ùïÑùî∏ùïÅùîº ùïäùîº _________________________‚úì
‚Ñïùïö‚ÑÇùïÇ ùïÇùïÄ ùîπ‚Ñçùîº‚Ñï ùïÇùïÄ ‚ÑÇ‚Ñçùïåùïã ùîπùî∏‚Ñçùïåùïã ùïÑùî∏ùïäùïã ‚Ñçùî∏ùïÄ_______________________________________________________________‚úì
‚ÑïùïÄ‚ÑÇùïÇ‚û™ùïÇùïÄ ùïÑùïåùïÑùïÑùïê ùïÇùïÜ ‚ÑùùïÜ‚Ñ§ ùïÉùïå‚Ñïùîª ‚ÑÇ‚ÑçùïåùïäùïãùïÄ ‚Ñç ùïÑùî∏ùïÅùîº ùïäùîº _________________________‚úì
‚Ñïùïö‚ÑÇùïÇ ùïÇùïÄ ùîπ‚Ñçùîº‚Ñï ùïÇùïÄ ‚ÑÇ‚Ñçùïåùïã ùîπùî∏‚Ñçùïåùïã ùïÑùî∏ùïäùïã ‚Ñçùî∏ùïÄ_______________________________________________________________‚úì
‚ÑïùïÄ‚ÑÇùïÇ‚û™ùïÇùïÄ ùïÑùïåùïÑùïÑùïê ùïÇùïÜ ‚ÑùùïÜ‚Ñ§ ùïÉùïå‚Ñïùîª ‚ÑÇ‚ÑçùïåùïäùïãùïÄ ‚Ñç ùïÑùî∏ùïÅùîº ùïäùîº _________________________‚úì
‚Ñïùïö‚ÑÇùïÇ ùïÇùïÄ ùîπ‚Ñçùîº‚Ñï ùïÇùïÄ ‚ÑÇ‚Ñçùïåùïã ùîπùî∏‚Ñçùïåùïã ùïÑùî∏ùïäùïã ‚Ñçùî∏ùïÄ_______________________________________________________________‚úì
‚ÑïùïÄ‚ÑÇùïÇ‚û™ùïÇùïÄ ùïÑùïåùïÑùïÑùïê ùïÇùïÜ ‚ÑùùïÜ‚Ñ§ ùïÉùïå‚Ñïùîª ‚ÑÇ‚ÑçùïåùïäùïãùïÄ ‚Ñç ùïÑùî∏ùïÅùîº ùïäùîº _________________________‚úì""",
    """ùó°ùóúùóñùóû ùóßùóòùó•ùóú ùü≠ùü± ùó¶ùóîùóîùóü ùóûùóú ùóïùóõùóòùó° ùóûùó¢ ùó•ùó¢ùó≠ ùó†ùóò ùó¢ùó¨ùó¢ ùó†ùóò ùóüùóòùóùùóîùóûùóîùó• ùü∞ ùóöùóõùóîùó°ùóßùóò ùóñùóõ#ùó¢ùóóùóßùóî ùóõùó® ____________________________________________________/
ùó°ùóúùóñùóû ùóûùóú ùóïùóõùóòùó° ùó¢ùó¨ùó¢ ùó†ùóò ùó•ùó¢ùó≠ ùó†ùóîùó•ùó™ùóîùóßùóú___________________________________________/

ùó°ùóúùóñùóû ùóßùóòùó•ùóú ùü≠ùü± ùó¶ùóîùóîùóü ùóûùóú ùóïùóõùóòùó° ùóûùó¢ ùó•ùó¢ùó≠ ùó†ùóò ùó¢ùó¨ùó¢ ùó†ùóò ùóüùóòùóùùóîùóûùóîùó• ùü∞ ùóöùóõùóîùó°ùóßùóò ùóñùóõ#ùó¢ùóóùóßùóî ùóõùó® ____________________________________________________/
ùó°ùóúùóñùóû ùóûùóú ùóïùóõùóòùó° ùó¢ùó¨ùó¢ ùó†ùóò ùó•ùó¢ùó≠ ùó†ùóîùó•ùó™ùóîùóßùóú___________________________________________/

ùó°ùóúùóñùóû ùóßùóòùó•ùóú ùü≠ùü± ùó¶ùóîùóîùóü ùóûùóú ùóïùóõùóòùó° ùóûùó¢ ùó•ùó¢ùó≠ ùó†ùóò ùó¢ùó¨ùó¢ ùó†ùóò ùóüùóòùóùùóîùóûùóîùó• ùü∞ ùóöùóõùóîùó°ùóßùóò ùóñùóõ#ùó¢ùóóùóßùóî ùóõùó® ____________________________________________________/
ùó°ùóúùóñùóû ùóûùóú ùóïùóõùóòùó° ùó¢ùó¨ùó¢ ùó†ùóò ùó•ùó¢ùó≠ ùó†ùóîùó•ùó™ùóîùóßùóú___________________________________________/"""
]

last_msg_id = None

def auto_reply():
    global last_msg_id
    while True:
        try:
            # üîç Get latest threads (group chats included)
            threads = cl.direct_threads(amount=5)

            # üîù Pick first thread which is a group chat
            thread = next((t for t in threads if len(t.users) > 2), None)

            if not thread:
                print("‚ùå No group chats found.")
                time.sleep(30)
                continue

            if not thread.messages:
                continue

            latest_msg = thread.messages[0]

            if latest_msg.user_id == me_id:
                continue

            if latest_msg.id == last_msg_id:
                continue

            reply = random.choice(reply_templates)
            cl.direct_answer(thread.id, reply)
            print(f"‚úîÔ∏è Replied to GC '{thread.thread_title}': {reply}")
            last_msg_id = latest_msg.id

            time.sleep(random.randint(25, 45))  # ‚è±Ô∏è Safe interval

        except Exception as e:
            print(f"‚ö†Ô∏è Error: {e}")
            time.sleep(random.randint(60, 90))

auto_reply()
